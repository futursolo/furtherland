{% comment  Copyright 2015 Futur Solo

   Licensed under the Apache License, Version 2.0 (the "License");
   you may not use this file except in compliance with the License.
   You may obtain a copy of the License at

       http://www.apache.org/licenses/LICENSE-2.0

   Unless required by applicable law or agreed to in writing, software
   distributed under the License is distributed on an "AS IS" BASIS,
   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   See the License for the specific language governing permissions and
   limitations under the License.
 %}
<!DOCTYPE HTML>
<html>
<head>
    <meta charset="UTF-8">
    <title>{{ page_title }}</title>

    <meta name="renderer" content="webkit">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <meta name="referrer" content="origin">
    <meta name="format-detection" content="telephone=no">

    <meta property="og:title" content="{{ origin_title }}">
    <meta property="og:url" content="{{ config["site_url"] }}">
    <meta property="og:site_name" content="{{ config["site_name"] }}">
    <meta name="description" content="{{ config["site_description"] }}">
    <meta name="keywords" content="{{ config["site_keywords"] }}">
    <meta name="generator" content="{{ FurtherLand.version() }}">

    <link rel="canonical" href="{{ config["site_url"] }}">

    <link rel="alternate" type="application/atom+xml" href="/feed.xml">

    <link href="//fonts.googleapis.com/css?family=Oxygen:400,700" rel="stylesheet" type="text/css">
    <link href="//fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet" type="text/css">

    <link rel="stylesheet" href="{{ static_url("highlight.min.css") }}">
    <link href="{{ static_url("main.css") }}" rel="stylesheet" type="text/css">
    <link href="{{ static_url("material.min.css") }}" rel="stylesheet" type="text/css">
</head>
<body style="background-image: url({{ static_url("natsu-background.jpg") }});">
    <div class="load-back" style="background-image: url({{ static_url("natsu-background.jpg") }});">
        <div class="content" style="background-image: url({{ static_url("natsu-background.jpg") }});"></div>
    </div>
    <div class="load">
        <div class="container">
            <div class="mdl-spinner mdl-js-spinner is-active"></div>
        </div>
    </div>
    <header>
        <nav>
            <div class="title">{{ config["site_name"] }}</div>
            <div class="links">
                <a href="/feed.xml" target="_blank"><div class="mdl-button mdl-js-button mdl-js-ripple-effect item">订阅</div></a>{% if not current_user %}
                <a href="/management/checkin"><div class="mdl-button mdl-js-button mdl-js-ripple-effect item">登录</div></a>{% else %}
                <a href="/management" target="_blank"><div class="mdl-button mdl-js-button mdl-js-ripple-effect item">{{ config["office_name"] }}</div></a>
                <a href="/management/checkout"><div class="mdl-button mdl-js-button mdl-js-ripple-effect item">登出</div></a>{% end %}
            </div>
        </nav>
        <div class="tabs">
            <div class="item">主页</div>
            <div class="item">文章</div>
            <div class="item">关于</div>
        </div>
    </header>
    <div class="main">
        <aside></aside>
        <div class="index content{% if current_page == "index" %} current{% end %}">{% if current_page == "index" %}{% for value in contents.values() %}
            <div class="index-card">
                <div class="title">{{ value["title"] }}</div>
                <div class="card-info">
                    <div class="author-avatar content" style="background-image: url(/avatar/{{ value["author"]["emailmd5"] }}?s=200&d=mm)"></div>
                    <div class="author-name content">{{ value["author"]["username"] }}</div>
                    <div class="time content">{{ value["time"] }}</div>
                </div>
                <div class="content">{{ value["content"] }}</div>
                <div class="more"><div class="mdl-button mdl-js-button mdl-js-ripple-effect button">阅读全文</div></div>
            </div>
        {% end %}{% end %}
        </div>
        <div class="writing content{% if current_page == "writing" %} current{% end %}"></div>
        <div class="page content{% if current_page == "page" %} current{% end %}"></div>
        <div class="not-found content{% if current_page == "not-found" %} current{% end %}"></div>
    </div>
    <footer></footer>
    <script>
        if (!window.fetch) {
            var headElement = document.getElementsByTagName("head")[0];
            var fetchElement = document.createElement("script");
            fetchElement.type = "text/javascript";
            fetchElement.src = "{{ static_url("fetch.js") }}";
            headElement.appendChild(fetchElement);
         }
    </script>
    <script src="{{ static_url("material.min.js") }}"></script>
    <script src="{{ static_url("marked.js") }}"></script>
    <script src="{{ static_url("highlight.min.js") }}"></script>
    <script src="{{ static_url("main.js") }}" charset="utf-8"></script>
    <script>
        window.addEventListener("load", function () {
            buildWindow("{{ current_page }}");
        });
    </script>
    {{ config["trace_code"] }}
</body>
</html>

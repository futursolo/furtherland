##
##   Copyright 2015 Futur Solo
##
##   Licensed under the Apache License, Version 2.0 (the "License");
##   you may not use this file except in compliance with the License.
##   You may obtain a copy of the License at
##
##       http://www.apache.org/licenses/LICENSE-2.0
##
##   Unless required by applicable law or agreed to in writing, software
##   distributed under the License is distributed on an "AS IS" BASIS,
##   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
##   See the License for the specific language governing permissions and
##   limitations under the License.
<!DOCTYPE HTML>
<html>
<head>
    <meta charset="UTF-8">
    <title>${page_title}</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <meta name="renderer" content="webkit">
    <meta name="format-detection" content="telephone=no">

    <link href="//fonts.googleapis.com/css?family=Oxygen:400,700" rel="stylesheet" type="text/css">
    <link href="${management_url("office.css")}" rel="stylesheet" type="text/css">
    <link rel="stylesheet" href="${management_url("highlight.min.css")}">

    <script src="${management_url("bower_components/webcomponentsjs/webcomponents.min.js")}"></script>

    <link rel="import" href="${management_url("bower_components/paper-styles/paper-styles.html")}">
    <link rel="import" href="${management_url("bower_components/iron-icons/iron-icons.html")}">
    <link rel="import" href="${management_url("bower_components/iron-icons/editor-icons.html")}">
    <link rel="import" href="${management_url("bower_components/paper-button/paper-button.html")}">
    <link rel="import" href="${management_url("bower_components/paper-input/paper-input.html")}">
    <link rel="import" href="${management_url("bower_components/paper-toolbar/paper-toolbar.html")}">
    <link rel="import" href="${management_url("bower_components/paper-menu/paper-menu.html")}">
    <link rel="import" href="${management_url("bower_components/paper-item/paper-item.html")}">
    <link rel="import" href="${management_url("bower_components/paper-item/paper-icon-item.html")}">
    <link rel="import" href="${management_url("bower_components/paper-icon-button/paper-icon-button.html")}">
    <link rel="import" href="${management_url("bower_components/paper-spinner/paper-spinner.html")}">
    <link rel="import" href="${management_url("bower_components/paper-button/paper-button.html")}">
    <link rel="import" href="${management_url("bower_components/paper-fab/paper-fab.html")}">
    <link rel="import" href="${management_url("bower_components/paper-checkbox/paper-checkbox.html")}">
    <link rel="import" href="${management_url("bower_components/paper-radio-group/paper-radio-group.html")}">
    <link rel="import" href="${management_url("bower_components/paper-toast/paper-toast.html")}">

    <style is="custom-style">
        :root {
            --default-primary-color: rgb(54, 134, 190);
        }
    </style>
</head>
<body>
    <div class="load visible" style="width: 100%; height: 100%;">
        <div class="container">
            <paper-spinner active></paper-spinner>
            <paper-toast class="failed" text="抱歉，发生了未知错误。">
                <span role="button" tabindex="0" style="color: #eeff41; margin: 10px" onclick="window.location.reload();">重新加载</span>
            </paper-toast>
        </div>
    </div>

    <div class="public">
        <div class="container"></div>
    </div>

    <header>
        <paper-toolbar class="toolbar">
            <paper-icon-button icon="menu" class="toggle-sidebar"></paper-icon-button>
            <div title>${config["office_name"]}</div>
            <paper-icon-button icon="refresh" class="reload-page"></paper-icon-button>
        </paper-toolbar>
    </header>

    <div class="main">
        <aside>
            <paper-material elevation="2">
                <paper-menu>
                    <paper-icon-item class="aside-item show-lobby">
                        <iron-icon icon="inbox" item-icon></iron-icon>
                        ${config["lobby_name"]}
                    </paper-icon-item>

                    <paper-icon-item class="aside-item show-working">
                        <iron-icon icon="none" item-icon></iron-icon>
                        ${config["working_name"]}
                    </paper-icon-item>

                    <paper-icon-item class="aside-item show-crda">
                        <iron-icon icon="none" item-icon></iron-icon>
                        ${config["crda_name"]}
                    </paper-icon-item>

                    <paper-icon-item class="aside-item show-configuration">
                        <iron-icon icon="none" item-icon></iron-icon>
                        ${config["configuration_name"]}
                    </paper-icon-item>
                </paper-menu>
            </paper-material>
        </aside>

        <div class="container lobby">
            <div class="container">
                <div class="tile writing-num">
                    <paper-material elevation="2" class="container">
                        <div class="name">文章</div>
                        <div class="content">0</div>

                        <div class="tips-list">
                            <div class="item">其中有0篇草稿</div>
                        </div>

                        <paper-button raised class="manage-writing">
                            管理文章<iron-icon icon="chevron-right"></iron-icon>
                        </paper-button>
                    </paper-material>
                </div>

                <div class="tile page-num">
                    <paper-material elevation="2" class="container">
                        <div class="name">页面</div>
                        <div class="content">0</div>

                        <div class="tips-list">
                            <div class="item">其中有0篇草稿</div>
                        </div>

                        <paper-button raised class="manage-page">
                            管理页面<iron-icon icon="chevron-right"></iron-icon>
                        </paper-button>
                    </paper-material>
                </div>

                <div class="tile reply-num">
                    <paper-material elevation="2" class="container">
                        <div class="name">评论</div>
                        <div class="content">0</div>

                        <div class="tips-list">
                            <div class="item">其中有0条在等待审核</div>
                            <div class="item">其中有0条被Akismet认为是拉圾评论</div>
                        </div>

                        <paper-button raised class="manage-reply">
                            管理评论<iron-icon icon="chevron-right"></iron-icon>
                        </paper-button>
                    </paper-material>
                </div>
            </div>
            <div class="float-container">
                <paper-fab icon="create" class="create-new-fab"></paper-fab>
            </div>
        </div>

        <div class="container working">
            <div class="title-container">
                <paper-input label="&nbsp;&nbsp;标题" class="title-input"></paper-input>
            </div>

            <div class="editor-container">
                <div class="description">创作</div>
                <textarea class="editor-textarea"></textarea>
            </div>

            <div class="preview-container">
                <div class="description">预览</div>
                <div class="preview-div"></div>
            </div>

            <div class="info-container">
                <paper-material elevation="4" class="container">
                    <div class="title-container">
                        <iron-icon icon="close" class="close-button"></iron-icon>作品信息
                    </div>

                    <div class="type-container">
                        <div class="title">作品类型：</div>
                        <paper-radio-group selected="writing" class="type-radio-group">
                            <paper-radio-button name="writing">文章</paper-radio-button>
                            <paper-radio-button name="page">页面</paper-radio-button>
                        </paper-radio-group>
                    </div>

                    <div class="slug-container">
                        <paper-input class="slug-input" label="短链接" auto-validate pattern="[\-a-zA-Z0-9]*" error-message="链接形式：[\-a-zA-Z0-9]* !"></paper-input>
                        <div class="slug-preview"></div>
                    </div>

                    <div class="time-container">
                        <paper-input class="time-input" label="发表时间"></paper-input>
                        <paper-checkbox class="time-checkbox" checked>当单击发表按钮时</paper-checkbox>
                    </div>

                    <div class="save-container">
                        <paper-button class="publish-button">立即发表</paper-button>
                        <paper-button class="draft-button">存为草稿</paper-button>
                    </div>

                    <div class="tips-container">
                        <div class="title">创作提示</div>
                        <div class="content">
                            <div>FurtherLand支持GitHub Flavored Markdown以及绝大部分HTML5代码，请尽情使用。</div>
                        </div>
                    </div>
                    <div class="hidden-container">
                        <input class="id-input" type="hidden" value="">
                        <input class="method-input" type="hidden" value="">
                        <input class="publish-or-not" type="hidden" value="">
                    </div>
                </paper-material>
            </div>

            <div class="float-container">
                <paper-fab icon="archive" class="open-public-fab"></paper-fab><br><br>
                <paper-fab icon="editor:publish" class="publish-fab"></paper-fab>
            </div>

            <div class="toast-container">
                <paper-toast class="draft-success" text="作品已经存为草稿。"></paper-toast>

                <paper-toast class="publish-success" text="作品已经发布。">
                    <span role="button" tabindex="0" style="color: #eeff41;margin: 10px" onclick="window.location.reload();">立即查看</span>
                </paper-toast>

                <paper-toast class="info-required" text="请将信息填写完整后再试。"></paper-toast>

                <paper-toast class="save-failed" text="抱歉，发生了未知错误。">
                    <span role="button" tabindex="0" style="color: #eeff41;margin: 10px" onclick="window.location.reload();">再次尝试</span>
                </paper-toast>
            </div>
        </div>

        <div class="container crda"></div>

        <div class="container configuration"></div>
    </div>
    <script src="${management_url("marked.js")}"></script>
    <script src="${management_url("highlight.min.js")}"></script>
    <script src="${management_url("office.js")}"></script>
    <script>
        window.addEventListener("load", function () {
            buildWindow("${slug}", "${sub_slug}");
        });
    </script>
</body>
</html>

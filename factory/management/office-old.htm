##
##   Copyright 2015 Futur Solo
##
##   Licensed under the Apache License, Version 2.0 (the "License");
##   you may not use this file except in compliance with the License.
##   You may obtain a copy of the License at
##
##       http://www.apache.org/licenses/LICENSE-2.0
##
##   Unless required by applicable law or agreed to in writing, software
##   distributed under the License is distributed on an "AS IS" BASIS,
##   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
##   See the License for the specific language governing permissions and
##   limitations under the License.
<!DOCTYPE HTML>
<html>
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>${page_title}</title>
    <meta name="renderer" content="webkit">
    <meta name="format-detection" content="telephone=no">
    <script src="${management_url("bower_components/webcomponentsjs/webcomponents.min.js")}"></script>
    <link rel="import" href="${management_url("bower_components/paper-styles/paper-styles.html")}">
    <link rel="import" href="${management_url("bower_components/iron-icons/iron-icons.html")}">
    <link rel="import" href="${management_url("bower_components/iron-icons/editor-icons.html")}">
    <link rel="import" href="${management_url("bower_components/paper-button/paper-button.html")}">
    <link href="//fonts.googleapis.com/css?family=Oxygen:400,700" rel="stylesheet" type="text/css">
    <link rel="stylesheet" href="${management_url("highlight.min.css")}">
    <link rel="import" href="${management_url("bower_components/paper-input/paper-input.html")}">
    <link rel="import" href="${management_url("bower_components/paper-toolbar/paper-toolbar.html")}">
    <link rel="import" href="${management_url("bower_components/paper-menu/paper-menu.html")}">
    <link rel="import" href="${management_url("bower_components/paper-item/paper-item.html")}">
    <link rel="import" href="${management_url("bower_components/paper-item/paper-icon-item.html")}">
    <link rel="import" href="${management_url("bower_components/paper-icon-button/paper-icon-button.html")}">
    <link rel="import" href="${management_url("bower_components/paper-spinner/paper-spinner.html")}">
    <link rel="import" href="${management_url("bower_components/paper-button/paper-button.html")}">
    <link rel="import" href="${management_url("bower_components/paper-fab/paper-fab.html")}">
    <link rel="import" href="${management_url("bower_components/paper-checkbox/paper-checkbox.html")}">
    <link rel="import" href="${management_url("bower_components/paper-radio-group/paper-radio-group.html")}">
    <link rel="import" href="${management_url("bower_components/paper-toast/paper-toast.html")}">
    <link href="${management_url("office.css")}" rel="stylesheet" type="text/css">
    <style is="custom-style">
        :root {
            --default-primary-color: rgb(54, 134, 190);
        }
    </style>
</head>
<body>
    <div class="load-layout visible" style="height: 100%; width: 100%;">
        <div class="table">
            <div class="table-cell">
                <paper-spinner active></paper-spinner>
            </div>
        </div>
        <paper-toast class="loading-failed" text="抱歉，发生了未知错误。">
            <span role="button" tabindex="0" style="color: #eeff41;margin: 10px" onclick="window.location.reload();">重新加载</span>
        </paper-toast>
    </div>
    <div class="public" id="public-area">
        <paper-material elevation="4" class="container">
            <div class="title">${config["public_name"]}<span class="close-button">×</span></div>
            <div class="bar">
                <span class="upload-now selector active">现在上传</span>
                <span class="select-from-public selector">从已存在的文件中选择</span>
            </div>
            <div class="content upload-now active">
                <div class="cell file-uploader">
                    <div class="tips">将文件拖动到这里来上传 或</div>
                    <div id="file-select-button" class="button">选择文件</div>
                    <input id="public-hidden-file-selector" name="files[]" type="file">
                </div>
            </div>
            <div class="content select-from-public">
                <div class="file-type">
                    <span>插入类型：</span>
                    <input id="public-insert-as-link" type="radio" name="public-insert-file-type" checked>
                    <label for="public-insert-as-link">链接</label>
                    <input id="public-insert-as-image" type="radio" name="public-insert-file-type">
                    <label for="public-insert-as-image">图片</label>
                </div>
                <div class="public-file-list"></div>
            </div>
            <div class="uploading">
                <div class="content">
                    <div>正在上传...</div>
                    <div class="process-bar">
                        <div class="done"></div>
                    </div>
                </div>
            </div>
        </paper-material>
    </div>
    </div>
    <header>
        <paper-toolbar id="header-toolbar">
            <paper-icon-button icon="menu" id="menu-button"></paper-icon-button>
            <div title>${config["office_name"]}</div>
            <paper-icon-button icon="refresh" id="reload"></paper-icon-button>
        </paper-toolbar>
    </header>
    <div class="main">
        <aside>
            <paper-material elevation="2">
                <paper-menu>
                    <paper-icon-item class="aside-item" id="switch-to-lobby">
                        <iron-icon icon="inbox" item-icon></iron-icon>${config["lobby_name"]}
                    </paper-icon-item>
                    <paper-icon-item id="switch-to-working" class="aside-item">${config["working_name"]}</paper-icon-item>
                    <paper-icon-item id="switch-to-crda" class="aside-item">${config["crda_name"]}</paper-icon-item>
                    <paper-icon-item id="switch-to-cofiguration" class="aside-item">${config["configuration_name"]}</paper-icon-item>
                </paper-menu>
            </paper-material>
        </aside>
        <div class="main-part lobby">
            <div class="table">
                <div class="table-cell">
                    <div class="tile" id="writing-num">
                        <paper-material elevation="2" class="tile-container">
                            <div class="tile-name">文章</div>
                            <div class="tile-content">0</div>
                            <div class="tile-tips-list">
                                <div class="tile-tips">其中有0篇草稿</div>
                            </div>
                            <paper-button raised class="manage-writing">管理文章<iron-icon icon="chevron-right"></iron-icon></paper-button>
                            <style>
                            </style>
                        </paper-material>
                    </div>
                    <div class="tile" id="page-num">
                        <paper-material elevation="2" class="tile-container">
                            <div class="tile-name">页面</div>
                            <div class="tile-content">0</div>
                            <div class="tile-tips-list">
                                <div class="tile-tips">其中有0篇草稿</div>
                            </div>
                            <paper-button raised class="manage-page">管理页面<iron-icon icon="chevron-right"></iron-icon></paper-button>
                        </paper-material>
                    </div>
                    <div class="tile" id="reply-num">
                        <paper-material elevation="2" class="tile-container">
                            <div class="tile-name">评论</div>
                            <div class="tile-content">0</div>
                            <div class="tile-tips-list">
                                <div class="tile-tips">其中有0条在等待审核</div>
                                <div class="tile-tips">其中有0条被Akismet认为是拉圾评论</div>
                            </div>
                            <paper-button raised class="manage-reply">管理评论<iron-icon icon="chevron-right"></iron-icon></paper-button>
                        </paper-material>
                    </div>
                </div>
            </div>
            <div class="float">
                <paper-fab icon="create" id="write-new-float-button"></paper-fab>
            </div>
        </div>
        <div class="main-part working">
            <div class="working-title">
                <paper-input-container id="working-title-input">
                    <label>&nbsp;&nbsp;标题</label>
                    <input is="iron-input">
                </paper-input-container>
            </div>
            <div class="editor">
                <div class="working-description">创作</div>
                <textarea id="editor-textarea"></textarea>
            </div>
            <div class="preview">
                <div class="working-description">预览</div>
                <div id="working-preview-area"></div>
            </div>
            <div class="working-info">
                <paper-material elevation="4" class="container">
                    <div class="working-info-title">
                        <iron-icon icon="close" id="working-info-close-button"></iron-icon>作品信息
                    </div>
                    <div class="working-slug">
                        <paper-input id="working-info-slug-input" label="短链接" auto-validate pattern="[\-a-zA-Z0-9]*" error-message="链接形式：[\-a-zA-Z0-9]* !"></paper-input>
                        <div id="working-info-slug-preview"></div>
                    </div>
                    <div class="working-time">
                        <paper-input id="working-time-input" label="发表时间"></paper-input>
                        <paper-checkbox id="working-time-is-when-published" checked>当单击发表按钮时</paper-checkbox>
                    </div>
                    <div class="working-type">
                        <div class="title">作品类型：</div>
                        <paper-radio-group selected="writing" id="working-type-radio-group">
                            <paper-radio-button name="writing" toggles="false">文章</paper-radio-button>
                            <paper-radio-button name="page" toggles="false">页面</paper-radio-button>
                        </paper-radio-group>
                    </div>
                    <div class="publish-area">
                        <paper-button id="working-publish-now-button">立即发表</paper-button>
                        <paper-button id="working-save-as-draft-button">存为草稿</paper-button>
                    </div>
                    <div class="create-tips">
                        <div class="title">创作提示</div>
                        <div class="content">
                            <div>FurtherLand支持GitHub Flavored Markdown以及绝大部分HTML5代码，请尽情使用。</div>
                        </div>
                    </div>
                    <input id="working-real-id" type="hidden" autocomplete="off" value="">
                    <input id="working-real-method" type="hidden" value="" autocomplete="off">
                </paper-material>
            </div>
            <div class="float">
                <paper-fab icon="archive" id="open-public-area-button"></paper-fab><br><br>
                <paper-fab icon="editor:publish" id="publish-working-buttton"></paper-fab>
            </div>
            <div class="toast-notification">
                <paper-toast class="save-success" text="作品保存成功。">
                    <span role="button" tabindex="0" style="color: #eeff41;margin: 10px" onclick="window.location.reload();">立即查看</span>
                </paper-toast>
                <paper-toast class="save-failed" text="抱歉，发生了未知错误。">
                    <span role="button" tabindex="0" style="color: #eeff41;margin: 10px" onclick="window.location.reload();">重新加载</span>
                </paper-toast>
            </div>
        </div>
    </div>
    <script src="${management_url("marked.js")}"></script>
    <script src="${management_url("highlight.min.js")}"></script>
    <script src="${management_url("office.js")}" charset="utf-8"></script>
    <script>
        window.addEventListener("load", function () {
            buildWindow("${slug}", "${sub_slug}");
        });
    </script>
</body>
</html>
